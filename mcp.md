Что такое MCP в контексте shadcn

MCP = Model Context Protocol — открытый протокол, позволяющий AI-ассистентам (LLM, агенты, плагины редакторов) безопасно подключаться к внешним источникам данных/инструментам и получать структурированный контекст.
Sascha's Blog
+3
ui.shadcn.com
+3
ui.shadcn.com
+3

В случае shadcn, MCP сервер выступает мостом между AI-инструментом и реестром компонентов: компонентами, демо, метаданными (props, зависимости, документация), блоками (составные шаблоны UI) и установкой компонентов.
ui.shadcn.com
+3
GitHub
+3
Sascha's Blog
+3

Основные функции MCP сервера shadcn:

list_components — вернуть список доступных компонентов

get_component — получить исходный код компонента + его метаданные

get_component_demo — примеры использования (демо)

list_blocks / get_block — составные блоки/шаблоны

install_component — “команда” установки/интеграции компонента в проект

Кеширование, лимитирование, обработка запросов к GitHub / API / реестру

Поддержка нескольких фреймворков (React, Vue, Svelte, React Native)
Awesome MCP Servers
+3
GitHub
+3
ui.shadcn.com
+3

Возможность конвертировать реестр в “MCP-совместимый” — shadcn CLI предлагает команду npx shadcn registry:mcp для преобразования любого реестра к формату MCP.
ui.shadcn.com
+1

Также в changelog видно, что команда shadcn добавила “zero-config MCP support” для реестров: “one command npx shadcn registry:mcp to make any registry mcp-compatible”
ui.shadcn.com

И дока MCP показывает, что шадчн MCP сервер “понимает” конфигурацию реестров, определённых в components.json проекта, и может обращаться к этим реестрам.
ui.shadcn.com
+1

Таким образом, архитектура MCP shadcn делится на два больших слоя:

Слой реестра / источника компонентов — это JSON/registry-формат, исходники компонентов, метаданные, примеры, возможно пакеты npm и связи зависимостей.

Слой MCP-сервера / прокси / адаптера — интерфейс, который принимает вызовы (возможно через stdio, RPC, HTTP, SSE или другой IPC), обрабатывает запрос для list, get, install и возвращает структурированные JSON-ответы. Также занимается кешированием, безопасностью, rate-limits, аутентификацией.

Тогда AI-инструмент (например, Claude, Cursor, плагин VSCode) может отправлять команды к MCP-серверу и “понимать” компоненты библиотеки в структурированном виде, а не полагаться на догадки LLM.

Как строится совместимость MCP с любым реестром (registry поддержка)

Документация говорит, что shadcn MCP сервер “работает из коробки с любым shadcn-совместимым реестром” — достаточно, чтобы реестр предоставлял файл registry.json (index) с информацией о компонентах.
ui.shadcn.com

То есть, для того, чтобы ваша собственная библиотека или реестр был “MCP-совместимым”, вам нужно:

Определить схему JSON для описания компонентов в реестре: имя, версия, зависимости, импортные пути, framework-специфичный код, демо/использование, описание (description), метаданные (props, типы)

Предоставить endpoint, по которому MCP-сервер может запрашивать:

индекс / листинг (registry.json)

детали компонента (например, {name}.json)

демо / примеры

Убедиться, что реестр корректно отражает зависимости (если один компонент зависит от другого) — поле registryDependencies используется для указания связей между элементами реестра в shadcn MCP.
ui.shadcn.com

Добавить документацию, описания, типы, чтобы AI мог “понимать” назначение и использование компонентов (не просто код)

Таким образом, ваша библиотека должна быть “MCP-Ready” на уровне реестра — соответствовать структуре, схеме (index + элементы), метаданным — прежде чем писать сам прокси-сервер MCP.

Что нужно в вашем случае: проектирование AI-Ready MCP для своей библиотеки

Ниже этапы, которые я рекомендую вам пройти, если вы хотите превратить вашу библиотеку/фреймворк в AI-Ready (с MCP-поддержкой и бейджем “AI-Ready”):

Этап	Задача	Детали / рекомендации
1. Проектирование схемы реестра (registry schema)	Определить JSON-схему, по которой будут описываться компоненты и блоки вашей библиотеки	Пример: registry.json с листингом всех компонентов, затем {component-name}.json с полным описанием, включающим:
– name, version
– frameworks или variants
– props / types / interface
– dependencies / registryDependencies
– demoUrls или examples
– description и ключевые теги
2. Подготовка исходников и демо / примеров	Для каждого компонента вы должны иметь рабочие примеры, код, стили, возможно с разными фреймворковыми адаптациями	Это может быть каталог, где хранится исходный код + демо-код (на React, Vue, Svelte и т.д.), либо шаблонные файлы. Демозаписи помогают AI понимать, как использовать компонент.
3. Построение MCP-сервера (прокси / интерфейс)	Сервер, реагирующий на команды MCP (list, get, demo, install)	Важные аспекты:
– интерфейс (RPC / IPC / HTTP / stdio) — зависит от того, как AI-клиент ожидает подключаться
– кеширование, лимитирование, защита от злоупотреблений
– возможность адаптироваться к множеству клиентов (VSCode, Cursor, Claude и пр.)
– поддержка “install_component” — способ, которым AI может автоматически интегрировать компонент в проект (с помощью CLI, скриптов)
4. Интеграция с AI-клиентами / агентами	Настройка клиента (VSCode плагин, Cursor, Claude) так, чтобы он знал о вашем MCP-сервере	Например, как shadcn указывает mcpServers в .cursor/mcp.json или .vscode/mcp.json
ui.shadcn.com
+1

5. “Bump” уровня доверия / сертификация AI-Ready	Документация, тесты, стандарт JSON-схемы, валидаторы	Вы можете опубликовать спецификацию своего MCP-реестра, написать тесты, возможно интегрироваться в экосистему MCP (если такая есть), либо предложить “сертификацию AI-Ready” для библиотек, которые соответствуют шаблонам.
6. Постоянное обновление и синхронизация	Когда вы обновляете свою библиотеку, реестр и MCP-сервер должны синхронизироваться	Добавление новых компонентов, удаление устаревших, обновление демо, типов, зависимостей — всё это должно быть отражено в реестре, и MCP-сервер должен обслуживать актуальные версии.

Важный момент: MCP — это мост, но основная ценность идёт из качества метаданных, демо, описаний и связей. Если AI-клиент получит компонент без описания, без типовой информации — его полезность сильно падает.

Возможные технические детали / сложности и решения

Формат коммуникации MCP: Обычно MCP-сервер может работать через stdio (если вызывается из npx / скрипта), либо как HTTP-сервис или IPC. Нужно выбрать формат, который совместим с вашими клиентами (VSCode, агенты).

Версионирование: Компоненты могут иметь версии — возможно вы захотите поддерживать несколько версий (v1, v2) в реестре.

Кэш и rate-limit: Как shadcn MCP сервер, вы, вероятно, будете обращаться к GitHub или другим API — нужно кешировать и ограничивать частоту запросов.

Безопасность / авторизация: Если вы хотите поддерживать приватные библиотеки, потребуется механизм авторизации (токены, подписки).

Мультифреймворковость: Если ваша библиотека поддерживает разные фреймворки (React, Vue и др.), вам нужно обеспечить в реестре разные “variants” и в MCP-сервере адаптацию в зависимости от запроса (какой framework клиент ожидает). Как shadcn — поддержка React, Svelte, Vue, React Native.
GitHub
+2
ui.shadcn.com
+2

Инсталляция компонента (install_component): AI может запросить “добавь компонент X в проект” — сервер MCP должен либо возвращать CLI-команду (например, npm install my-lib-component-x) либо рискованнее — выполнять её (но это требует осторожности).

Совместимость структур каталогов и путей: Ваш проект-клиент может иметь разные структуры (monorepo, alias пути). Нужно, чтобы MCP-сервер мог правильно разрешать пути импорта.

Обработка зависимостей внутри реестра: Если компонент A зависит от B из того же реестра, нужно обозначить это через registryDependencies в метаданных, чтобы AI-клиент мог корректно устанавливать всё дерево зависимостей.
ui.shadcn.com

Документация и “примеры назначения”: Метаданные должны включать не только “что это” (props, типы), но и “зачем это” (описание, когда использовать). Это важно, чтобы AI не предлагал бессмысленный компонент из-за отсутствия контекста.

Тестирование MCP-сервера: Нужно разработать тесты для всех MCP-инструментов (list, get, demo, install) и убедиться в корректности JSON-ответов.

Как можно начать PoC / минимальный рабочий прототип

Вот минимальный план для прототипа “MCP для вашей библиотеки”:

Выберите несколько “ядровых” компонентов (например, Button, Modal, Card) и создайте исходники + демо + метаданные (props, типы).

Постройте простой реестр: registry.json, {component}.json с метаданными + ссылками на демо-файлы.

Напишите лёгкий MCP-сервер на Node.js / TypeScript, который поддерживает команды list_components, get_component, get_component_demo.

Напишите клиентскую обёртку (CLI или HTTP-клиент) и протестируйте вручную: “list”, “get X”, “return demo example”.

Интегрируйте с LLM/агентом: например, локально смоделируйте “AI спрашивает MCP: get the Button component” и убедитесь, что MCP корректно возвращает метаданные.

Расширьте: добавьте install_component, зависимости, больше компонентов, кеширование.

Сделайте документацию, примеры, помощь для “library developers” (как сделать свой реестр MCP-совместимым).

После этого вы можете “бейджировать” вашу библиотеку как “AI-Ready”, по аналогии с shadcn: “MyLib MCP-compatible”.
